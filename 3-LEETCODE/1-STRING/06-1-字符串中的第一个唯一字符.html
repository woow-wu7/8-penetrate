<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      // 387. 字符串中的第一个唯一字符

      // 题目
      // 示例 1：
      // 输入: s = "leetcode"
      // 输出: 0

      // 示例 2:
      // 输入: s = "loveleetcode"
      // 输出: 2

      // 示例 3:
      // 输入: s = "aabb"
      // 输出: -1

      /**
       * @param {string} s
       * @return {number}
       */

      // leetcode
      // 387. 字符串中的第一个唯一字符 https://leetcode.cn/problems/first-unique-character-in-a-string/

      // 对比
      // 387 和 50 完全一样
      // 387. 字符串中的第一个唯一字符 --------- ( 位置 ) https://leetcode.cn/problems/first-unique-character-in-a-string/
      // 剑指 Offer 50. 第一个只出现一次的字符 - ( 字符 ) https://leetcode.cn/problems/di-yi-ge-zhi-chu-xian-yi-ci-de-zi-fu-lcof/
      // 2351. 第一个出现两次的字母 https://leetcode.cn/problems/first-letter-to-appear-twice/

      // 对比
      // - 136. 只出现一次的数字 https://leetcode.cn/problems/single-number/
      // - 387. 字符串中的第一个唯一字符  https://leetcode.cn/problems/first-unique-character-in-a-string/

      // 思路
      // 1. 第一次遍历，统计每个字符出现的次数
      // 2. 第二次遍历，判断每个字符出现的次数，次数为1，直接返回。( 即为第一次不重复 )

      // 问题
      // 拷问: 第一次遍历得到了map，里面记录了每个字符出现的次数，但是是无序的。如果有多个字符都只出现了一次，如何确定第一个出现的字符呢
      // 回答: 通过第二次遍历 原字符串 来解决，从前往后遍历，第一次出现1次的字符 即 最先出现

      var firstUniqChar = function (s) {
        const map = new Map(); // 统计每个字符出现的次数

        const len = s.length;

        // 存
        for (let i = 0; i < len; i++) {
          const cur = s[i];
          if (!map.has(cur)) map.set(cur, 1);
          else map.set(cur, map.get(cur) + 1);
        }

        // 取
        // 再次遍历原字符串，如果该字符在map中只出现一次，立即返回，则是第一个只出现一次
        for (let i = 0; i < len; i++) {
          const cur = s[i];
          if (map.get(cur) === 1) return i;
        }

        // 空串 或者 都不止出现一次，返回 -1
        return -1;
      };
    </script>
  </body>
</html>
