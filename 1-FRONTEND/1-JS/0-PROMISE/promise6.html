<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      const async1 = async () => {
        console.log(1);
        await async2();
        console.log(2);
      };

      const async2 = async () => {
        console.log(3);
        await async3();
        console.log(4);
      };

      const async3 = async () => {
        console.log(5);
        Promise.resolve().then(() => console.log(7));
        console.log(6);
      };

      console.log(8);
      setTimeout(() => {
        console.log(12);
        Promise.resolve().then(() => console.log(14));
      });
      async1();

      new Promise((resolve) => {
        console.log(9);
        setTimeout(() => {
          console.log(10);
          resolve();
        });
      }).then(() => console.log(11));

      console.log(13);
      // 8 1 3 5 6 9 13, 7 4 2, 12 14, 10 11

      // 同步任务: 8 1 3 5 6 9 13
      // 微任务队列: [ 7 4 2 ]
      // 宏任务队列: [ [12, 微任务14], [10, 微任务11] ]
    </script>
  </body>
</html>
