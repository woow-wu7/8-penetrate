<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <button id="button">点击</button>
    <script>
      const button = document.getElementById("button");

      const targetWindow = window.open(
        "http://127.0.0.1:5501/FRONTEND/JS/1-cross-domain/%E8%B7%A8%E5%9F%9F%E9%80%9A%E4%BF%A1-%E6%94%B6%E6%B6%88%E6%81%AF.html"
      );

      button.addEventListener(
        "click",
        (e) => {
          console.log(e);
          targetWindow.postMessage("向其他窗口发送的消息", "*"); // 在 FRONTEND/JS/1-cross-domain/跨域通信-收消息.html 页面中查看收到的消息，e.origin 验证源，防止XSS攻击
        },
        {
          capture: false,
        }
      );
    </script>

    <script>
      // class Node {
      //   children: Nodes[] = [];
      //   reference?: Node;
      // }
      /**
       * deep clone对象及关系
       *
       * - 每个节点会有子节点
       * - 每个节点会有一个额外关联的节点
       *
       * 因此数据以树的形式呈现，并且对象中会有一个reference字段指向任意一个节点
       * 深度clone这些数据
       *
       * @param root 数据根
       * @return 返回一个复制后的节点
       */
      // function deepClone(root: Node, map = new Map()): Node {
      //   Reflect.keys(root).forEach(item => {
      //   })
      // }
      // const a = { children: [b, c], reference: null };
      // const b = { children: [], reference: c };
      // const c = { children: [], reference: a };
      // deepClone(a)
    </script>
  </body>
</html>
